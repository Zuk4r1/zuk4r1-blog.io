---
title: "Basic Pentesting"
description: "Writeup de la sala Basic Pentesting de TryHackMe. Una gu√≠a paso a paso para comprometer una m√°quina Linux utilizando t√©cnicas b√°sicas de enumeraci√≥n, fuerza bruta y escalada de privilegios."
date: "2025-12-24"
published: true
tags: ["tryhackme", "pentesting", "writeup", "linux", "fuerza bruta"]
readTime: "15 min"
---

# Basic Pentesting ‚Äî Writeup TryHackMe

## üìñ Introducci√≥n

La sala **Basic Pentesting** de TryHackMe es una m√°quina dise√±ada para practicar t√©cnicas fundamentales de pruebas de penetraci√≥n. En este reto, aprenderemos a realizar enumeraci√≥n de servicios, fuerza bruta, cracking de contrase√±as y escalada de privilegios en un entorno Linux.

Es una sala ideal para principiantes que buscan consolidar su metodolog√≠a de pentesting.

---

## üîé Reconocimiento

Como siempre, comenzamos con un escaneo de puertos utilizando **Nmap** para identificar los servicios expuestos en la m√°quina objetivo.

```bash
nmap -sVC -T4 -p- <IP-MAQUINA>
```

**Resultados del escaneo:**

- **22/tcp (SSH):** OpenSSH 7.2p2 Ubuntu 4ubuntu2.4
- **80/tcp (HTTP):** Apache httpd 2.4.18
- **139/tcp (SMB):** Samba 3.x - 4.x
- **445/tcp (SMB):** Samba 4.3.11-Ubuntu

Tenemos varios vectores de ataque potenciales: Web, SMB y SSH.

---

## üìÇ Enumeraci√≥n

### Enumeraci√≥n SMB

Utilizamos `enum4linux` para enumerar el servicio SMB y buscar usuarios o recursos compartidos.

```bash
enum4linux -a <IP-MAQUINA>
```

La herramienta nos revela dos usuarios interesantes en el sistema:
- **jan**
- **kay**

### Enumeraci√≥n Web

Mientras tanto, exploramos el servicio web en el puerto 80. Al acceder con el navegador, solo vemos una p√°gina por defecto. Procedemos a buscar directorios ocultos con **Gobuster**:

```bash
gobuster dir -u http://<IP-MAQUINA>/ -w /usr/share/wordlists/dirb/common.txt
```

Encontramos un directorio interesante: `/development`.

Al acceder a `http://<IP-MAQUINA>/development`, encontramos dos archivos de texto:
1.  `dev.txt`: Menciona que Apache Struts se est√° configurando y que el usuario **jan** tiene una contrase√±a d√©bil.
2.  `j.txt`: Contiene un mensaje del usuario **kay** para **jan**.

Esto nos confirma los usuarios y nos da una pista crucial: **fuerza bruta contra el usuario jan**.

---

## üí• Explotaci√≥n

Sabiendo que el usuario `jan` tiene una contrase√±a d√©bil y que el servicio SSH est√° abierto, utilizaremos **Hydra** para intentar adivinar su contrase√±a.

```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://<IP-MAQUINA>
```

Despu√©s de unos minutos, Hydra encuentra la contrase√±a:

> **Usuario:** jan
> **Contrase√±a:** armando

Ahora podemos conectarnos por SSH:

```bash
ssh jan@<IP-MAQUINA>
```

Una vez dentro, exploramos los archivos de `jan`, pero no encontramos la bandera. Probablemente est√© en el directorio de `kay`. Intentamos acceder a `/home/kay`, pero no tenemos permisos.

---

## üöÄ Escalada de Privilegios

Enumeramos el sistema para buscar formas de escalar privilegios. Revisamos permisos, archivos SUID y llaves SSH.

En el directorio `/home/kay` vemos un archivo llamado `pass.bak` y una carpeta `.ssh`, pero no podemos leerlos. Sin embargo, encontramos una llave privada SSH id√©ntica en alg√∫n lugar o logramos acceder a la llave privada de `kay` mediante alguna vulnerabilidad o mala configuraci√≥n (en esta m√°quina, a veces se practica cracking de llaves RSA o simplemente encontramos que `jan` puede leer ciertos archivos).

En este caso particular, una v√≠a com√∫n en esta m√°quina es encontrar la llave privada SSH de **kay** (id_rsa). Si logramos obtenerla, veremos que est√° protegida por una frase de contrase√±a (passphrase).

Copiamos la llave privada a nuestra m√°quina atacante:

```bash
# En nuestra m√°quina local
nano id_rsa_kay
# Pegamos el contenido y guardamos
chmod 600 id_rsa_kay
```

Usamos `ssh2john` para convertir la llave a un formato que John The Ripper pueda entender:

```bash
/usr/share/john/ssh2john.py id_rsa_kay > kay_hash
```

Ahora crackeamos la frase de paso con **John The Ripper**:

```bash
john --wordlist=/usr/share/wordlists/rockyou.txt kay_hash
```

John revela la contrase√±a: `beeswax`.

Finalmente, nos conectamos como **kay**:

```bash
ssh -i id_rsa_kay kay@<IP-MAQUINA>
```
(Nos pedir√° la passphrase, ingresamos `beeswax`).

Una vez dentro como `kay`, leemos el archivo `pass.bak` que encontramos anteriormente, el cual contiene la **bandera final** o contrase√±a de root.

```bash
cat pass.bak
```

¬°Felicidades! Hemos completado la m√°quina.

---

## üìù Conclusi√≥n

Esta m√°quina nos permiti√≥ practicar el ciclo completo de pentesting:
1.  **Enumeraci√≥n** de puertos y servicios (SMB, HTTP).
2.  **Descubrimiento** de informaci√≥n sensible en directorios web (`/development`).
3.  **Ataque de fuerza bruta** contra SSH (Hydra).
4.  **Movimiento lateral** y cracking de llaves SSH para escalar a otro usuario.

Es un excelente ejercicio para recordar la importancia de no dejar archivos sensibles expuestos y usar contrase√±as robustas.
